---
description: Project context for nav-e – Navigation Engine (Flutter + Rust)
alwaysApply: true
---

# nav-e: Navigation Engine

**nav-e** is the core of the Navware Navigation Companion: a Flutter app with a Rust native engine for mapping, routing, and device communication.

## Stack
- **Flutter/Dart**: UI, state (BLoC, GoRouter), BLE (flutter_blue_plus), SQLite
- **Rust** (under `native/`): nav_engine (DDD/Hexagonal/CQRS), nav_e_ffi (Flutter-Rust bridge), device_comm (BLE/protobuf)
- **FFI**: flutter_rust_bridge; codegen via `make codegen`

## Structure
- `lib/`: Flutter app (features: home, map_layers, device_management, saved_places, search, navigate, plan_route, settings)
- `native/nav_engine`: Domain, application (commands/queries/handlers), infrastructure (OSRM, Photon, protobuf adapter)
- `native/nav_e_ffi`: FFI API exposed to Dart
- `proto/`: Protocol Buffers for device communication

## Docs (read these for deep context)
- **Architecture**: `docs/architecture/overview.md` – DDD, Hexagonal, CQRS
- **Docs index**: `docs/README.md` – ADRs, guides, Rust docs
- **Guides**: `docs/guides/` – device-communication, flutter-rust-bridge, testing
- **Rust**: `docs/rust/` – overview, device-comm, protobuf
- **ADRs**: `docs/adr/` – architecture decisions

## Conventions
- Conventional Commits for PR titles (`feat:`, `fix:`, `chore:`)
- Effective Dart; `flutter analyze`
- Rust: `make fmt`, `make build-native`, `make test`
